using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using Interfaces;
using System.Reflection;
using System.Security.Cryptography.X509Certificates;
using System.ServiceModel;
using System.ServiceModel.Security;
using System.Security.Cryptography.X509Certificates;
using System.Security.Principal;
namespace Client
{
    class Program
    {
        static void Main(string[] args)
        {

            NetTcpBinding binding = new NetTcpBinding();

            EndpointAddress address = new EndpointAddress(new Uri("net.tcp://localhost:40001/AntiMalwareStandby"));
            IClient cl = new Client(binding ,address);
            int isEventClient = 1;
            try
            {
                isEventClient = Int32.Parse(args[0]);
            }catch(Exception ex)
            {
                Console.WriteLine(ex.Message);
            }
            ((Client)cl).IsEventClient = isEventClient;
            Console.WriteLine(((Client)cl).IsEventClient);
            cl.getSignature();

            
            
            using (Client proxy = new Client(binding, address))
            {
                /// 1. Communication test to establish authentication
              //      proxy.update();
                
                Console.WriteLine("TestCommunication() finished. Press <enter> to continue ...");
                Console.ReadLine();
            }
            

        }
    }
}
